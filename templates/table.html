<!DOCTYPE html>
<html>
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.4/socket.io.min.js"></script>
    <title>Blackjack Table Room</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/table.css') }}">
</head>
<body>
    <div id="table_id" data-id="{{ table.table_id }}" style="display: none;"></div>
    <script>
        function getUsername() {
            return "{{ current_user.id }}"
        }
    </script>
    
    <h1>Blackjack Table Room</h1>
    <div id="game_starting">
        
    </div>
    <div id="table">
    </div>

    <div class="display-table">
        <div class="table-left">
            <div class="dealer-box" id="dealer">
                <!-- dealer box -->
                <h2> Dealer </h2>
                <div class="hand" id="dealer-hand">
                </div>
            </div>

            <div class="player current-player" id="player-{{ current_user.id }}">
                <h2>Player {{ current_user.id }}</h2>
                <p>Balance: 0</p>
                <p>Bet: 0</p>
                <p>Hand: 0</p>
                <!-- div for displaying hand -->
                <div class="hand" id="hand-{{ current_user.id }}">
                </div>
            </div>
        </div>

        <div class="container player-box right-table" id="player-box">
            {% for player in table.players %}
                {% if player != current_user.id %}
                    <div class="player" id="player-{{ player }}">
                        <h2>Player {{ player }}</h2>
                        <p>Balance: 0</p>
                        <p>Bet: 0</p>
                        <p>Hand: 0</p>
                        <!-- div for displaying hand -->
                        <div class="hand" id="hand-{{ player }}">
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>
    <button onclick="hit()" id="hit">
        Hit
    </button>
    <button onclick="stand()" id="hit">
        Stand
    </button>
    <button onclick="fold()" id="hit">
        Fold
    </button>
    <div class="container chat-box" id="chat-box-{{ table.table_id }}">
        <div class="chat-form">
            <input type="text" id="chat-text" class="input-basic" placeholder="Send message">
            <button onclick="sendChat(this)" class="basic-button primary">Submit</button>
        </div>

        <div class="chat-message-container">

        </div>
    </div>
    <script src="{{ url_for('static', filename='js/chat.js')}}"></script>
</body>
<script defer src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="{{ url_for('static', filename='js/table.js') }}"></script>
<script>
        const socket = io();
</script>
</html>